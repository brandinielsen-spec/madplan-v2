---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - madplan-v2/src/app/manifest.ts
  - madplan-v2/public/icons/icon-192.png
  - madplan-v2/public/icons/icon-512.png
  - madplan-v2/public/icons/icon-maskable.png
  - madplan-v2/public/icons/apple-touch-icon.png
  - madplan-v2/src/components/layout/mobile-nav.tsx
  - madplan-v2/src/components/layout/header.tsx
  - madplan-v2/src/components/layout/app-shell.tsx
  - madplan-v2/src/app/page.tsx
  - madplan-v2/src/app/ugeplan/page.tsx
  - madplan-v2/src/app/opskrifter/page.tsx
  - madplan-v2/src/app/tilfoej/page.tsx
  - madplan-v2/src/app/indkob/page.tsx
  - madplan-v2/src/app/layout.tsx
autonomous: false

must_haves:
  truths:
    - "User can navigate between all 4 main sections using bottom nav"
    - "Active navigation item is visually highlighted"
    - "App can be installed on mobile via Add to Home Screen"
    - "PWA manifest shows correct app name and theme color"
    - "Each page shows appropriate title in header"
  artifacts:
    - path: "madplan-v2/src/app/manifest.ts"
      provides: "PWA manifest configuration"
      exports: ["default"]
    - path: "madplan-v2/src/components/layout/mobile-nav.tsx"
      provides: "Bottom navigation component"
      exports: ["MobileNav"]
    - path: "madplan-v2/src/components/layout/app-shell.tsx"
      provides: "Main layout wrapper"
      exports: ["AppShell"]
    - path: "madplan-v2/src/app/ugeplan/page.tsx"
      provides: "Ugeplan placeholder page"
      min_lines: 10
    - path: "madplan-v2/public/icons/icon-192.png"
      provides: "PWA icon 192x192"
  key_links:
    - from: "madplan-v2/src/components/layout/mobile-nav.tsx"
      to: "Navigation routes"
      via: "Next.js Link component"
      pattern: "Link.*href="
    - from: "madplan-v2/src/app/layout.tsx"
      to: "madplan-v2/src/app/manifest.ts"
      via: "Next.js automatic manifest linking"
      pattern: "manifest.ts"
    - from: "All page.tsx files"
      to: "madplan-v2/src/components/layout/app-shell.tsx"
      via: "AppShell wrapper"
      pattern: "<AppShell"
---

<objective>
Create PWA manifest, app icons, layout components (header, bottom nav, app shell), and placeholder pages for all routes.

Purpose: Complete the app shell so users can navigate between sections and install the app on mobile. This fulfills UIX-02 (PWA installable) and UIX-05 (mobile-first design).

Output: Fully navigable app shell with PWA capability, ready for content in Phase 2.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PWA manifest and icons</name>
  <files>
    madplan-v2/src/app/manifest.ts
    madplan-v2/public/icons/icon-192.png
    madplan-v2/public/icons/icon-512.png
    madplan-v2/public/icons/icon-maskable.png
    madplan-v2/public/icons/apple-touch-icon.png
    madplan-v2/src/app/layout.tsx
  </files>
  <action>
    1. Create src/app/manifest.ts (from RESEARCH.md):
       ```typescript
       import type { MetadataRoute } from "next";

       export default function manifest(): MetadataRoute.Manifest {
         return {
           name: "Madplan",
           short_name: "Madplan",
           description: "Planlaeg ugens maaltider",
           start_url: "/",
           display: "standalone",
           background_color: "#FAF7F2",
           theme_color: "#CB6843",
           icons: [
             { src: "/icons/icon-192.png", sizes: "192x192", type: "image/png" },
             { src: "/icons/icon-512.png", sizes: "512x512", type: "image/png" },
             { src: "/icons/icon-maskable.png", sizes: "512x512", type: "image/png", purpose: "maskable" },
           ],
         };
       }
       ```

    2. Create placeholder icons in public/icons/:
       - Generate simple placeholder PNGs using a solid terracotta (#CB6843) background
       - For now, use placeholder images - these will be replaced with proper design later
       - Create 4 files: icon-192.png (192x192), icon-512.png (512x512), icon-maskable.png (512x512), apple-touch-icon.png (180x180)

       Use Node.js to generate simple colored placeholder icons:
       ```bash
       cd madplan-v2
       mkdir -p public/icons
       npm install sharp --save-dev
       ```

       Then create a script to generate placeholder icons, or use an online tool to create simple solid-color squares.

       Alternative: Create simple SVG placeholders converted to PNG, or download placeholder icons temporarily.

    3. Update layout.tsx to add apple-touch-icon link in head:
       ```tsx
       <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
       ```
       (This should already be in layout.tsx from Plan 01, verify it's present)
  </action>
  <verify>
    - Visit http://localhost:3000/manifest.webmanifest (Next.js serves manifest.ts here)
    - JSON response shows name: "Madplan", theme_color: "#CB6843"
    - Icons array has 3 entries with correct paths
    - Visit http://localhost:3000/icons/icon-192.png shows an image
    - Browser DevTools > Application > Manifest shows valid manifest
  </verify>
  <done>
    PWA manifest configured with app name, colors, and icon references. Placeholder icons created in public/icons/.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create layout components</name>
  <files>
    madplan-v2/src/components/layout/mobile-nav.tsx
    madplan-v2/src/components/layout/header.tsx
    madplan-v2/src/components/layout/app-shell.tsx
  </files>
  <action>
    1. Create src/components/layout/mobile-nav.tsx (from RESEARCH.md):
       - "use client" directive (uses usePathname)
       - Import Link from next/link, usePathname from next/navigation
       - Import icons: Calendar, Book, Plus, ShoppingCart from lucide-react
       - Import cn from @/lib/utils
       - Define navItems array with 4 items:
         - { href: "/ugeplan", icon: Calendar, label: "Ugeplan" }
         - { href: "/opskrifter", icon: Book, label: "Opskrifter" }
         - { href: "/tilfoej", icon: Plus, label: "Tilfoej" }
         - { href: "/indkob", icon: ShoppingCart, label: "Indkob" }
       - Render fixed bottom nav with flex justify-around
       - Highlight active item (pathname.startsWith(href)) with text-primary
       - Add safe-area-pb class for iPhone home indicator

    2. Create src/components/layout/header.tsx:
       - Simple header with title and optional actions slot
       - Sticky top, bg-background, border-bottom
       - h-14 height, flex items-center justify-between
       - Title uses font-heading class
       - Props: title: string, actions?: React.ReactNode

    3. Create src/components/layout/app-shell.tsx (from RESEARCH.md):
       - Import MobileNav and Header
       - Props: children, title, actions
       - Structure: flex flex-col min-h-screen
       - Header at top, main content with pb-20 (space for nav), MobileNav at bottom
       - Main content has px-4 pt-4 padding
  </action>
  <verify>
    - All 3 files created in src/components/layout/
    - No TypeScript errors: `npx tsc --noEmit`
    - Import statements resolve correctly
  </verify>
  <done>
    Three layout components created: MobileNav (bottom navigation), Header (top bar), AppShell (wrapper combining both)
  </done>
</task>

<task type="auto">
  <name>Task 3: Create placeholder pages</name>
  <files>
    madplan-v2/src/app/page.tsx
    madplan-v2/src/app/ugeplan/page.tsx
    madplan-v2/src/app/opskrifter/page.tsx
    madplan-v2/src/app/tilfoej/page.tsx
    madplan-v2/src/app/indkob/page.tsx
  </files>
  <action>
    1. Update src/app/page.tsx to be the dashboard/home:
       - Import AppShell
       - Wrap content in AppShell with title="Madplan"
       - Show welcome message and placeholder content
       - Include "Dagens ret" placeholder card
       - Include quick links to other sections
       - Style with earth tone colors

    2. Create src/app/ugeplan/page.tsx:
       - Import AppShell
       - Wrap in AppShell with title="Ugeplan"
       - Placeholder content: "Ugeplan kommer i Phase 2"
       - Show week navigation placeholder (prev/next week buttons)
       - Show 7 day cards as placeholders

    3. Create src/app/opskrifter/page.tsx:
       - Import AppShell
       - Wrap in AppShell with title="Opskrifter"
       - Placeholder content: "Opskriftliste kommer i Phase 2"
       - Show search input placeholder
       - Show 3-4 skeleton cards for recipes

    4. Create src/app/tilfoej/page.tsx:
       - Import AppShell
       - Wrap in AppShell with title="Tilfoej opskrift"
       - Placeholder content: "Import funktion kommer i Phase 4"
       - Show placeholder for URL input
       - Show placeholder for image upload

    5. Create src/app/indkob/page.tsx:
       - Import AppShell
       - Wrap in AppShell with title="Indkobsliste"
       - Placeholder content: "Indkobsliste kommer i Phase 2"
       - Show some placeholder checkbox items

    Each page should:
    - Use AppShell wrapper
    - Have consistent styling with earth tones
    - Show placeholder text indicating future functionality
    - Use Card components where appropriate
    - Include Skeleton components for loading state previews
  </action>
  <verify>
    - All 5 page files exist
    - `npm run dev` starts without errors
    - Visit each URL: /, /ugeplan, /opskrifter, /tilfoej, /indkob
    - Each page shows correct title in header
    - Bottom nav visible on all pages
    - Active nav item highlighted correctly when on that page
  </verify>
  <done>
    5 placeholder pages created (home, ugeplan, opskrifter, tilfoej, indkob), all wrapped in AppShell with consistent layout
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete app shell with:
    - PWA manifest and placeholder icons
    - Bottom navigation with 4 items
    - Header component
    - 5 placeholder pages
    - Earth tone styling throughout
  </what-built>
  <how-to-verify>
    1. Open http://localhost:3000 in browser
    2. Verify earth tone colors (beige background, terracotta accents)
    3. Tap each bottom nav item - verify navigation works and active state shows
    4. Check each page has correct title in header
    5. Open DevTools > Application > Manifest - verify PWA manifest is valid
    6. On mobile or mobile emulator:
       - Test "Add to Home Screen" / "Install App" option
       - Verify app icon appears (placeholder is fine)
       - Open installed app - should show in standalone mode (no browser UI)
    7. Check responsive design:
       - Desktop: content centered, reasonable max-width
       - Mobile: full width, bottom nav accessible
  </how-to-verify>
  <resume-signal>Type "approved" if everything works, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Full navigation test:**
   - Start at /
   - Click Ugeplan nav -> /ugeplan loads, nav item highlighted
   - Click Opskrifter nav -> /opskrifter loads, nav item highlighted
   - Click Tilfoej nav -> /tilfoej loads, nav item highlighted
   - Click Indkob nav -> /indkob loads, nav item highlighted

2. **PWA Lighthouse audit:**
   ```bash
   # In Chrome DevTools > Lighthouse > Progressive Web App
   ```
   Should pass basic PWA requirements (manifest valid, icons present)

3. **Build test:**
   ```bash
   cd madplan-v2 && npm run build
   ```
   Should succeed without errors

4. **Mobile test (emulator or real device):**
   - Install app via "Add to Home Screen"
   - App opens in standalone mode
   - Navigation works correctly
</verification>

<success_criteria>
- PWA manifest.ts created with correct app name, colors, icons
- 4 placeholder icons exist in public/icons/
- MobileNav component shows 4 nav items with active state
- Header component displays page title
- AppShell combines Header + content + MobileNav
- 5 pages exist: /, /ugeplan, /opskrifter, /tilfoej, /indkob
- All pages use AppShell wrapper
- Navigation between pages works without full reload
- App installable on mobile (PWA manifest valid)
- `npm run build` succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
